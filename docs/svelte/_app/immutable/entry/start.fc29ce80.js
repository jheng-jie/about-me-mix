var ft=Object.defineProperty,ut=Object.defineProperties;var dt=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var He=(e,a,c)=>a in e?ft(e,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):e[a]=c,q=(e,a)=>{for(var c in a||(a={}))Be.call(a,c)&&He(e,c,a[c]);if(he)for(var c of he(a))Ge.call(a,c)&&He(e,c,a[c]);return e},K=(e,a)=>ut(e,dt(a));var Ke=(e,a)=>{var c={};for(var o in e)Be.call(e,o)&&a.indexOf(o)<0&&(c[o]=e[o]);if(e!=null&&he)for(var o of he(e))a.indexOf(o)<0&&Ge.call(e,o)&&(c[o]=e[o]);return c};var O=(e,a,c)=>new Promise((o,g)=>{var d=h=>{try{l(c.next(h))}catch(w){g(w)}},v=h=>{try{l(c.throw(h))}catch(w){g(w)}},l=h=>h.done?o(h.value):Promise.resolve(h.value).then(d,v);l((c=c.apply(e,a)).next())});import{o as Ee,t as Se}from"../chunks/scheduler.35bdfe39.js";import{S as at,a as rt,I as H,g as ze,f as Je,b as ke,c as ge,s as ie,i as Re,d as z,o as We,P as Ye,e as pt}from"../chunks/singletons.9b7c1e43.js";import{b as W}from"../chunks/paths.33ef9b75.js";import{R as Xe,H as se}from"../chunks/control.f5b05b5f.js";function ht(e,a){return e==="/"||a==="ignore"?e:a==="never"?e.endsWith("/")?e.slice(0,-1):e:a==="always"&&!e.endsWith("/")?e+"/":e}function gt(e){return e.split("%25").map(decodeURI).join("%25")}function mt(e){for(const a in e)e[a]=decodeURIComponent(e[a]);return e}const wt=["href","pathname","search","searchParams","toString","toJSON"];function yt(e,a){const c=new URL(e);for(const o of wt)Object.defineProperty(c,o,{get(){return a(),e[o]},enumerable:!0,configurable:!0});return _t(c),c}function _t(e){Object.defineProperty(e,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}const vt="/__data.json";function bt(e){return e.replace(/\/$/,"")+vt}function Et(...e){let a=5381;for(const c of e)if(typeof c=="string"){let o=c.length;for(;o;)a=a*33^c.charCodeAt(--o)}else if(ArrayBuffer.isView(c)){const o=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);let g=o.length;for(;g;)a=a*33^o[--g]}else throw new TypeError("value must be a string or TypedArray");return(a>>>0).toString(36)}const ot=window.fetch;window.fetch=(e,a)=>((e instanceof Request?e.method:(a==null?void 0:a.method)||"GET")!=="GET"&&ce.delete(Pe(e)),ot(e,a));const ce=new Map;function St(e,a){const c=Pe(e,a),o=document.querySelector(c);if(o!=null&&o.textContent){const g=JSON.parse(o.textContent),{body:d}=g,v=Ke(g,["body"]),l=o.getAttribute("data-ttl");return l&&ce.set(c,{body:d,init:v,ttl:1e3*Number(l)}),Promise.resolve(new Response(d,v))}return window.fetch(e,a)}function kt(e,a,c){if(ce.size>0){const o=Pe(e,c),g=ce.get(o);if(g){if(performance.now()<g.ttl&&["default","force-cache","only-if-cached",void 0].includes(c==null?void 0:c.cache))return new Response(g.body,g.init);ce.delete(o)}}return window.fetch(a,c)}function Pe(e,a){let o=`script[data-sveltekit-fetched][data-url=${JSON.stringify(e instanceof Request?e.url:e)}]`;if(a!=null&&a.headers||a!=null&&a.body){const g=[];a.headers&&g.push([...new Headers(a.headers)].join(",")),a.body&&(typeof a.body=="string"||ArrayBuffer.isView(a.body))&&g.push(a.body),o+=`[data-hash="${Et(...g)}"]`}return o}const Rt=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function At(e){const a=[];return{pattern:e==="/"?/^\/$/:new RegExp(`^${Lt(e).map(o=>{const g=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(o);if(g)return a.push({name:g[1],matcher:g[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const d=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(o);if(d)return a.push({name:d[1],matcher:d[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!o)return;const v=o.split(/\[(.+?)\](?!\])/);return"/"+v.map((h,w)=>{if(w%2){if(h.startsWith("x+"))return Ae(String.fromCharCode(parseInt(h.slice(2),16)));if(h.startsWith("u+"))return Ae(String.fromCharCode(...h.slice(2).split("-").map($=>parseInt($,16))));const p=Rt.exec(h);if(!p)throw new Error(`Invalid param: ${h}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,T,j,k,D]=p;return a.push({name:k,matcher:D,optional:!!T,rest:!!j,chained:j?w===1&&v[0]==="":!1}),j?"(.*?)":T?"([^/]*)?":"([^/]+?)"}return Ae(h)}).join("")}).join("")}/?$`),params:a}}function It(e){return!/^\([^)]+\)$/.test(e)}function Lt(e){return e.slice(1).split("/").filter(It)}function Pt(e,a,c){const o={},g=e.slice(1),d=g.filter(l=>l!==void 0);let v=0;for(let l=0;l<a.length;l+=1){const h=a[l];let w=g[l-v];if(h.chained&&h.rest&&v&&(w=g.slice(l-v,l+1).filter(p=>p).join("/"),v=0),w===void 0){h.rest&&(o[h.name]="");continue}if(!h.matcher||c[h.matcher](w)){o[h.name]=w;const p=a[l+1],T=g[l+1];p&&!p.rest&&p.optional&&T&&h.chained&&(v=0),!p&&!T&&Object.keys(o).length===d.length&&(v=0);continue}if(h.optional&&h.chained){v++;continue}return}if(!v)return o}function Ae(e){return e.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function Ot({nodes:e,server_loads:a,dictionary:c,matchers:o}){const g=new Set(a);return Object.entries(c).map(([l,[h,w,p]])=>{const{pattern:T,params:j}=At(l),k={id:l,exec:D=>{const $=T.exec(D);if($)return Pt($,j,o)},errors:[1,...p||[]].map(D=>e[D]),layouts:[0,...w||[]].map(v),leaf:d(h)};return k.errors.length=k.layouts.length=Math.max(k.errors.length,k.layouts.length),k});function d(l){const h=l<0;return h&&(l=~l),[h,e[l]]}function v(l){return l===void 0?l:[g.has(l),e[l]]}}function it(e){try{return JSON.parse(sessionStorage[e])}catch(a){}}function Ze(e,a){const c=JSON.stringify(a);try{sessionStorage[e]=c}catch(o){}}const xt=-1,Ut=-2,jt=-3,Nt=-4,Tt=-5,$t=-6;function Dt(e,a){if(typeof e=="number")return g(e,!0);if(!Array.isArray(e)||e.length===0)throw new Error("Invalid input");const c=e,o=Array(c.length);function g(d,v=!1){if(d===xt)return;if(d===jt)return NaN;if(d===Nt)return 1/0;if(d===Tt)return-1/0;if(d===$t)return-0;if(v)throw new Error("Invalid input");if(d in o)return o[d];const l=c[d];if(!l||typeof l!="object")o[d]=l;else if(Array.isArray(l))if(typeof l[0]=="string"){const h=l[0],w=a==null?void 0:a[h];if(w)return o[d]=w(g(l[1]));switch(h){case"Date":o[d]=new Date(l[1]);break;case"Set":const p=new Set;o[d]=p;for(let k=1;k<l.length;k+=1)p.add(g(l[k]));break;case"Map":const T=new Map;o[d]=T;for(let k=1;k<l.length;k+=2)T.set(g(l[k]),g(l[k+1]));break;case"RegExp":o[d]=new RegExp(l[1],l[2]);break;case"Object":o[d]=Object(l[1]);break;case"BigInt":o[d]=BigInt(l[1]);break;case"null":const j=Object.create(null);o[d]=j;for(let k=1;k<l.length;k+=2)j[l[k]]=g(l[k+1]);break;default:throw new Error(`Unknown type ${h}`)}}else{const h=new Array(l.length);o[d]=h;for(let w=0;w<l.length;w+=1){const p=l[w];p!==Ut&&(h[w]=g(p))}}else{const h={};o[d]=h;for(const w in l){const p=l[w];h[w]=g(p)}}return o[d]}return g(0)}function Ct(e){return e.filter(a=>a!=null)}const st=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);[...st];const Mt=new Set([...st]);[...Mt];function Vt(e){return O(this,null,function*(){var a;for(const c in e)if(typeof((a=e[c])==null?void 0:a.then)=="function")return Object.fromEntries(yield Promise.all(Object.entries(e).map(d=>O(this,[d],function*([o,g]){return[o,yield g]}))));return e})}const qt="x-sveltekit-invalidated",Ft="x-sveltekit-trailing-slash";var tt;const Y=(tt=it(at))!=null?tt:{};var nt;const oe=(nt=it(rt))!=null?nt:{};function Ie(e){Y[e]=ie()}function X(e){return location.href=e.href,new Promise(()=>{})}function Ht(e,a){var Ve;const c=Ot(e),o=e.nodes[0],g=e.nodes[1];o(),g();const d=document.documentElement,v=[],l=[];let h=null;const w={before_navigate:[],on_navigate:[],after_navigate:[]};let p={branch:[],error:null,url:null},T=!1,j=!1,k=!0,D=!1,$=!1,M=!1,Z=!1,B,N=(Ve=history.state)==null?void 0:Ve[H];N||(N=Date.now(),history.replaceState(K(q({},history.state),{[H]:N}),"",location.href));const me=Y[N];me&&(history.scrollRestoration="manual",scrollTo(me.x,me.y));let G,Q,ee;function Oe(){return O(this,null,function*(){if(ee=ee||Promise.resolve(),yield ee,!ee)return;ee=null;const t=new URL(location.href),s=ne(t,!0);h=null;const n=Q={},i=s&&(yield _e(s));if(n===Q&&i){if(i.type==="redirect")return le(new URL(i.location,t).href,{},1,n);i.props.page!==void 0&&(G=i.props.page),B.$set(i.props)}})}function xe(t){l.some(s=>s==null?void 0:s.snapshot)&&(oe[t]=l.map(s=>{var n;return(n=s==null?void 0:s.snapshot)==null?void 0:n.capture()}))}function Ue(t){var s;(s=oe[t])==null||s.forEach((n,i)=>{var r,u;(u=(r=l[i])==null?void 0:r.snapshot)==null||u.restore(n)})}function je(){Ie(N),Ze(at,Y),xe(N),Ze(rt,oe)}function le(E,S,R,b){return O(this,arguments,function*(t,{noScroll:s=!1,replaceState:n=!1,keepFocus:i=!1,state:r={},invalidateAll:u=!1},m,A){return typeof t=="string"&&(t=new URL(t,ze(document))),pe({url:t,scroll:s?ie():null,keepfocus:i,redirect_count:m,details:{state:r,replaceState:n},nav_token:A,accepted:()=>{u&&(Z=!0)},blocked:()=>{},type:"goto"})})}function Ne(t){return O(this,null,function*(){return h={id:t.id,promise:_e(t).then(s=>(s.type==="loaded"&&s.state.error&&(h=null),s))},h.promise})}function fe(...t){return O(this,null,function*(){const n=c.filter(i=>t.some(r=>i.exec(r))).map(i=>Promise.all([...i.layouts,i.leaf].map(r=>r==null?void 0:r[1]())));yield Promise.all(n)})}function Te(t){var i,r;p=t.state;const s=document.querySelector("style[data-sveltekit]");s&&s.remove(),G=t.props.page,B=new e.root({target:a,props:K(q({},t.props),{stores:z,components:l}),hydrate:!0}),Ue(N);const n={from:null,to:{params:p.params,route:{id:(r=(i=p.route)==null?void 0:i.id)!=null?r:null},url:new URL(location.href)},willUnload:!1,type:"enter",complete:Promise.resolve()};w.after_navigate.forEach(u=>u(n)),j=!0}function te(A){return O(this,arguments,function*({url:t,params:s,branch:n,status:i,error:r,route:u,form:m}){var y;let E="never";for(const L of n)(L==null?void 0:L.slash)!==void 0&&(E=L.slash);t.pathname=ht(t.pathname,E),t.search=t.search;const S={type:"loaded",state:{url:t,params:s,branch:n,error:r,route:u},props:{constructors:Ct(n).map(L=>L.node.component)}};m!==void 0&&(S.props.form=m);let R={},b=!G,I=0;for(let L=0;L<Math.max(n.length,p.branch.length);L+=1){const V=n[L],C=p.branch[L];(V==null?void 0:V.data)!==(C==null?void 0:C.data)&&(b=!0),V&&(R=q(q({},R),V.data),b&&(S.props[`data_${I}`]=R),I+=1)}return(!p.url||t.href!==p.url.href||p.error!==r||m!==void 0&&m!==G.form||b)&&(S.props.page={error:r,params:s,route:{id:(y=u==null?void 0:u.id)!=null?y:null},status:i,url:new URL(t),form:m!=null?m:null,data:b?R:G.data}),S})}function we(m){return O(this,arguments,function*({loader:t,parent:s,url:n,params:i,route:r,server_data_node:u}){var R,b,I,U,y,L,V;let A=null;const E={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1},S=yield t();if((R=S.universal)!=null&&R.load){let C=function(...f){for(const _ of f){const{href:P}=new URL(_,n);E.dependencies.add(P)}},re;const F={route:new Proxy(r,{get:(f,_)=>(E.route=!0,f[_])}),params:new Proxy(i,{get:(f,_)=>(E.params.add(_),f[_])}),data:(b=u==null?void 0:u.data)!=null?b:null,url:yt(n,()=>{E.url=!0}),fetch(f,_){return O(this,null,function*(){let P;f instanceof Request?(P=f.url,_=q({body:f.method==="GET"||f.method==="HEAD"?void 0:yield f.blob(),cache:f.cache,credentials:f.credentials,headers:f.headers,integrity:f.integrity,keepalive:f.keepalive,method:f.method,mode:f.mode,redirect:f.redirect,referrer:f.referrer,referrerPolicy:f.referrerPolicy,signal:f.signal},_)):P=f;const x=new URL(P,n);return C(x.href),x.origin===n.origin&&(P=x.href.slice(n.origin.length)),j?kt(P,x.href,_):St(P,_)})},setHeaders:()=>{},depends:C,parent(){return E.parent=!0,s()}};A=(I=yield S.universal.load.call(null,F))!=null?I:null,A=A?yield Vt(A):null}return{node:S,loader:t,server:u,universal:(U=S.universal)!=null&&U.load?{type:"data",data:A,uses:E}:null,data:(y=A!=null?A:u==null?void 0:u.data)!=null?y:null,slash:(V=(L=S.universal)==null?void 0:L.trailingSlash)!=null?V:u==null?void 0:u.slash}})}function $e(t,s,n,i,r){if(Z)return!0;if(!i)return!1;if(i.parent&&t||i.route&&s||i.url&&n)return!0;for(const u of i.params)if(r[u]!==p.params[u])return!0;for(const u of i.dependencies)if(v.some(m=>m(new URL(u))))return!0;return!1}function ye(t,s){return(t==null?void 0:t.type)==="data"?t:(t==null?void 0:t.type)==="skip"&&s!=null?s:null}function _e(u){return O(this,arguments,function*({id:t,invalidating:s,url:n,params:i,route:r}){var re;if((h==null?void 0:h.id)===t)return h.promise;const{errors:m,layouts:A,leaf:E}=r,S=[...A,E];m.forEach(f=>f==null?void 0:f().catch(()=>{})),S.forEach(f=>f==null?void 0:f[1]().catch(()=>{}));let R=null;const b=p.url?t!==p.url.pathname+p.url.search:!1,I=p.route?r.id!==p.route.id:!1;let U=!1;const y=S.map((f,_)=>{var J;const P=p.branch[_],x=!!(f!=null&&f[0])&&((P==null?void 0:P.loader)!==f[1]||$e(U,I,b,(J=P.server)==null?void 0:J.uses,i));return x&&(U=!0),x});if(y.some(Boolean)){try{R=yield Qe(n,y)}catch(f){return ue({status:f instanceof se?f.status:500,error:yield ae(f,{url:n,params:i,route:{id:r.id}}),url:n,route:r})}if(R.type==="redirect")return R}const L=R==null?void 0:R.nodes;let V=!1;const C=S.map((f,_)=>O(this,null,function*(){var ve;if(!f)return;const P=p.branch[_],x=L==null?void 0:L[_];if((!x||x.type==="skip")&&f[1]===(P==null?void 0:P.loader)&&!$e(V,I,b,(ve=P.universal)==null?void 0:ve.uses,i))return P;if(V=!0,(x==null?void 0:x.type)==="error")throw x;return we({loader:f[1],url:n,params:i,route:r,parent:()=>O(this,null,function*(){var Fe;const qe={};for(let be=0;be<_;be+=1)Object.assign(qe,(Fe=yield C[be])==null?void 0:Fe.data);return qe}),server_data_node:ye(x===void 0&&f[0]?{type:"skip"}:x!=null?x:null,f[0]?P==null?void 0:P.server:void 0)})}));for(const f of C)f.catch(()=>{});const F=[];for(let f=0;f<S.length;f+=1)if(S[f])try{F.push(yield C[f])}catch(_){if(_ instanceof Xe)return{type:"redirect",location:_.location};let P=500,x;if(L!=null&&L.includes(_))P=(re=_.status)!=null?re:P,x=_.error;else if(_ instanceof se)P=_.status,x=_.body;else{if(yield z.updated.check())return yield X(n);x=yield ae(_,{params:i,url:n,route:{id:r.id}})}const J=yield De(f,F,m);return J?yield te({url:n,params:i,branch:F.slice(0,J.idx).concat(J.node),status:P,error:x,route:r}):yield Me(n,{id:r.id},x,P)}else F.push(void 0);return yield te({url:n,params:i,branch:F,status:200,error:null,route:r,form:s?void 0:null})})}function De(t,s,n){return O(this,null,function*(){for(;t--;)if(n[t]){let i=t;for(;!s[i];)i-=1;try{return{idx:i+1,node:{node:yield n[t](),loader:n[t],data:{},server:null,universal:null}}}catch(r){continue}}})}function ue(r){return O(this,arguments,function*({status:t,error:s,url:n,route:i}){var R;const u={};let m=null;if(e.server_loads[0]===0)try{const b=yield Qe(n,[!0]);if(b.type!=="data"||b.nodes[0]&&b.nodes[0].type!=="data")throw 0;m=(R=b.nodes[0])!=null?R:null}catch(b){(n.origin!==We||n.pathname!==location.pathname||T)&&(yield X(n))}const E=yield we({loader:o,url:n,params:u,route:i,parent:()=>Promise.resolve({}),server_data_node:ye(m)}),S={node:yield g(),loader:g,universal:null,server:null,data:null};return yield te({url:n,params:u,branch:[E,S],status:t,error:s,route:null})})}function ne(t,s){if(Re(t,W))return;const n=de(t);for(const i of c){const r=i.exec(n);if(r)return{id:t.pathname+t.search,invalidating:s,route:i,params:mt(r),url:t}}}function de(t){return gt(t.pathname.slice(W.length)||"/")}function Ce({url:t,type:s,intent:n,delta:i}){let r=!1;const u=et(p,n,t,s);i!==void 0&&(u.navigation.delta=i);const m=K(q({},u.navigation),{cancel:()=>{r=!0,u.reject(new Error("navigation was cancelled"))}});return $||w.before_navigate.forEach(A=>A(m)),r?null:u}function pe(R){return O(this,arguments,function*({url:t,scroll:s,keepfocus:n,redirect_count:i,details:r,type:u,delta:m,nav_token:A={},accepted:E,blocked:S}){var C,F,re;const b=ne(t,!1),I=Ce({url:t,type:u,delta:m,intent:b});if(!I){S();return}const U=N;E(),$=!0,j&&z.navigating.set(I.navigation),Q=A;let y=b&&(yield _e(b));if(!y){if(Re(t,W))return yield X(t);y=yield Me(t,{id:null},yield ae(new Error(`Not found: ${t.pathname}`),{url:t,params:{},route:{id:null}}),404)}if(t=(b==null?void 0:b.url)||t,Q!==A)return I.reject(new Error("navigation was aborted")),!1;if(y.type==="redirect")if(i>=20)y=yield ue({status:500,error:yield ae(new Error("Redirect loop"),{url:t,params:{},route:{id:null}}),url:t,route:{id:null}});else return le(new URL(y.location,t).href,{},i+1,A),!1;else((C=y.props.page)==null?void 0:C.status)>=400&&(yield z.updated.check())&&(yield X(t));if(v.length=0,Z=!1,D=!0,Ie(U),xe(U),(F=y.props.page)!=null&&F.url&&y.props.page.url.pathname!==t.pathname&&(t.pathname=(re=y.props.page)==null?void 0:re.url.pathname),r){const f=r.replaceState?0:1;if(r.state[H]=N+=f,history[r.replaceState?"replaceState":"pushState"](r.state,"",t),!r.replaceState){let _=N+1;for(;oe[_]||Y[_];)delete oe[_],delete Y[_],_+=1}}if(h=null,j){p=y.state,y.props.page&&(y.props.page.url=t);const f=(yield Promise.all(w.on_navigate.map(_=>_(I.navigation)))).filter(_=>typeof _=="function");if(f.length>0){let _=function(){w.after_navigate=w.after_navigate.filter(P=>!f.includes(P))};f.push(_),w.after_navigate.push(...f)}B.$set(y.props)}else Te(y);const{activeElement:L}=document;if(yield Se(),k){const f=t.hash&&document.getElementById(decodeURIComponent(t.hash.slice(1)));s?scrollTo(s.x,s.y):f?f.scrollIntoView():scrollTo(0,0)}const V=document.activeElement!==L&&document.activeElement!==document.body;!n&&!V&&Le(),k=!0,y.props.page&&(G=y.props.page),$=!1,u==="popstate"&&Ue(N),I.fulfil(void 0),w.after_navigate.forEach(f=>f(I.navigation)),z.navigating.set(null),D=!1})}function Me(t,s,n,i){return O(this,null,function*(){return t.origin===We&&t.pathname===location.pathname&&!T?yield ue({status:i,error:n,url:t,route:s}):yield X(t)})}function lt(){let t;d.addEventListener("mousemove",u=>{const m=u.target;clearTimeout(t),t=setTimeout(()=>{i(m,2)},20)});function s(u){i(u.composedPath()[0],1)}d.addEventListener("mousedown",s),d.addEventListener("touchstart",s,{passive:!0});const n=new IntersectionObserver(u=>{for(const m of u)m.isIntersecting&&(fe(de(new URL(m.target.href))),n.unobserve(m.target))},{threshold:0});function i(u,m){const A=Je(u,d);if(!A)return;const{url:E,external:S,download:R}=ke(A,W);if(S||R)return;const b=ge(A);if(!b.reload)if(m<=b.preload_data){const I=ne(E,!1);I&&Ne(I)}else m<=b.preload_code&&fe(de(E))}function r(){n.disconnect();for(const u of d.querySelectorAll("a")){const{url:m,external:A,download:E}=ke(u,W);if(A||E)continue;const S=ge(u);S.reload||(S.preload_code===Ye.viewport&&n.observe(u),S.preload_code===Ye.eager&&fe(de(m)))}}w.after_navigate.push(r),r()}function ae(t,s){var n;return t instanceof se?t.body:(n=e.hooks.handleError({error:t,event:s}))!=null?n:{message:s.route.id!=null?"Internal Error":"Not Found"}}return{after_navigate:t=>{Ee(()=>(w.after_navigate.push(t),()=>{const s=w.after_navigate.indexOf(t);w.after_navigate.splice(s,1)}))},before_navigate:t=>{Ee(()=>(w.before_navigate.push(t),()=>{const s=w.before_navigate.indexOf(t);w.before_navigate.splice(s,1)}))},on_navigate:t=>{Ee(()=>(w.on_navigate.push(t),()=>{const s=w.on_navigate.indexOf(t);w.on_navigate.splice(s,1)}))},disable_scroll_handling:()=>{(D||!j)&&(k=!1)},goto:(t,s={})=>le(t,s,0),invalidate:t=>{if(typeof t=="function")v.push(t);else{const{href:s}=new URL(t,location.href);v.push(n=>n.href===s)}return Oe()},invalidate_all:()=>(Z=!0,Oe()),preload_data:t=>O(this,null,function*(){const s=new URL(t,ze(document)),n=ne(s,!1);if(!n)throw new Error(`Attempted to preload a URL that does not belong to this app: ${s}`);yield Ne(n)}),preload_code:fe,apply_action:t=>O(this,null,function*(){var s;if(t.type==="error"){const n=new URL(location.href),{branch:i,route:r}=p;if(!r)return;const u=yield De(p.branch.length,i,r.errors);if(u){const m=yield te({url:n,params:p.params,branch:i.slice(0,u.idx).concat(u.node),status:(s=t.status)!=null?s:500,error:t.error,route:r});p=m.state,B.$set(m.props),Se().then(Le)}}else t.type==="redirect"?le(t.location,{invalidateAll:!0},0):(B.$set({form:null,page:K(q({},G),{form:t.data,status:t.status})}),yield Se(),B.$set({form:t.data}),t.type==="success"&&Le())}),_start_router:()=>{var s;history.scrollRestoration="manual",addEventListener("beforeunload",n=>{let i=!1;if(je(),!$){const r=et(p,void 0,null,"leave"),u=K(q({},r.navigation),{cancel:()=>{i=!0,r.reject(new Error("navigation was cancelled"))}});w.before_navigate.forEach(m=>m(u))}i?(n.preventDefault(),n.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&je()}),(s=navigator.connection)!=null&&s.saveData||lt(),d.addEventListener("click",n=>{var I,U,y;if(n.button||n.which!==1||n.metaKey||n.ctrlKey||n.shiftKey||n.altKey||n.defaultPrevented)return;const i=Je(n.composedPath()[0],d);if(!i)return;const{url:r,external:u,target:m,download:A}=ke(i,W);if(!r)return;if(m==="_parent"||m==="_top"){if(window.parent!==window)return}else if(m&&m!=="_self")return;const E=ge(i);if(!(i instanceof SVGAElement)&&r.protocol!==location.protocol&&!(r.protocol==="https:"||r.protocol==="http:")||A)return;if(u||E.reload){Ce({url:r,type:"link"})?$=!0:n.preventDefault();return}const[R,b]=r.href.split("#");if(b!==void 0&&R===location.href.split("#")[0]){if(p.url.hash===r.hash){n.preventDefault(),(I=i.ownerDocument.getElementById(b))==null||I.scrollIntoView();return}if(M=!0,Ie(N),t(r),!E.replace_state)return;M=!1,n.preventDefault()}pe({url:r,scroll:E.noscroll?ie():null,keepfocus:(U=E.keep_focus)!=null?U:!1,redirect_count:0,details:{state:{},replaceState:(y=E.replace_state)!=null?y:r.href===location.href},accepted:()=>n.preventDefault(),blocked:()=>n.preventDefault(),type:"link"})}),d.addEventListener("submit",n=>{var y;if(n.defaultPrevented)return;const i=HTMLFormElement.prototype.cloneNode.call(n.target),r=n.submitter;if(((r==null?void 0:r.formMethod)||i.method)!=="get")return;const m=new URL((r==null?void 0:r.hasAttribute("formaction"))&&(r==null?void 0:r.formAction)||i.action);if(Re(m,W))return;const A=n.target,{keep_focus:E,noscroll:S,reload:R,replace_state:b}=ge(A);if(R)return;n.preventDefault(),n.stopPropagation();const I=new FormData(A),U=r==null?void 0:r.getAttribute("name");U&&I.append(U,(y=r==null?void 0:r.getAttribute("value"))!=null?y:""),m.search=new URLSearchParams(I).toString(),pe({url:m,scroll:S?ie():null,keepfocus:E!=null?E:!1,redirect_count:0,details:{state:{},replaceState:b!=null?b:m.href===location.href},nav_token:{},accepted:()=>{},blocked:()=>{},type:"form"})}),addEventListener("popstate",n=>O(this,null,function*(){var i;if(Q={},(i=n.state)!=null&&i[H]){if(n.state[H]===N)return;const r=Y[n.state[H]],u=new URL(location.href);if(p.url.href.split("#")[0]===location.href.split("#")[0]){t(u),Y[N]=ie(),N=n.state[H],scrollTo(r.x,r.y);return}const m=n.state[H]-N;yield pe({url:u,scroll:r,keepfocus:!1,redirect_count:0,details:null,accepted:()=>{N=n.state[H]},blocked:()=>{history.go(-m)},type:"popstate",delta:m,nav_token:Q})}else if(!M){const r=new URL(location.href);t(r)}})),addEventListener("hashchange",()=>{M&&(M=!1,history.replaceState(K(q({},history.state),{[H]:++N}),"",location.href))});for(const n of document.querySelectorAll("link"))n.rel==="icon"&&(n.href=n.href);addEventListener("pageshow",n=>{n.persisted&&z.navigating.set(null)});function t(n){p.url=n,z.page.set(K(q({},G),{url:n})),z.page.notify()}},_hydrate:A=>O(this,[A],function*({status:t=200,error:s,node_ids:n,params:i,route:r,data:u,form:m}){T=!0;const E=new URL(location.href);({params:i={},route:r={id:null}}=ne(E,!1)||{});let S;try{const R=n.map((U,y)=>O(this,null,function*(){const L=u[y];return L!=null&&L.uses&&(L.uses=ct(L.uses)),we({loader:e.nodes[U],url:E,params:i,route:r,parent:()=>O(this,null,function*(){const V={};for(let C=0;C<y;C+=1)Object.assign(V,(yield R[C]).data);return V}),server_data_node:ye(L)})})),b=yield Promise.all(R),I=c.find(({id:U})=>U===r.id);if(I){const U=I.layouts;for(let y=0;y<U.length;y++)U[y]||b.splice(y,0,void 0)}S=yield te({url:E,params:i,branch:b,status:t,error:s,form:m,route:I!=null?I:null})}catch(R){if(R instanceof Xe){yield X(new URL(R.location,location.href));return}S=yield ue({status:R instanceof se?R.status:500,error:yield ae(R,{url:E,params:i,route:r}),url:E,route:r})}Te(S)})}}function Qe(e,a){return O(this,null,function*(){var g;const c=new URL(e);c.pathname=bt(e.pathname),e.pathname.endsWith("/")&&c.searchParams.append(Ft,"1"),c.searchParams.append(qt,a.map(d=>d?"1":"0").join(""));const o=yield ot(c.href);if((g=o.headers.get("content-type"))!=null&&g.includes("text/html")&&(yield X(e)),!o.ok)throw new se(o.status,yield o.json());return new Promise(d=>O(this,null,function*(){var T;const v=new Map,l=o.body.getReader(),h=new TextDecoder;function w(j){return Dt(j,{Promise:k=>new Promise((D,$)=>{v.set(k,{fulfil:D,reject:$})})})}let p="";for(;;){const{done:j,value:k}=yield l.read();if(j&&!p)break;for(p+=!k&&p?`
`:h.decode(k);;){const D=p.indexOf(`
`);if(D===-1)break;const $=JSON.parse(p.slice(0,D));if(p=p.slice(D+1),$.type==="redirect")return d($);if($.type==="data")(T=$.nodes)==null||T.forEach(M=>{(M==null?void 0:M.type)==="data"&&(M.uses=ct(M.uses),M.data=w(M.data))}),d($);else if($.type==="chunk"){const{id:M,data:Z,error:B}=$,N=v.get(M);v.delete(M),B?N.reject(w(B)):N.fulfil(w(Z))}}}}))})}function ct(e){var a,c;return{dependencies:new Set((a=e==null?void 0:e.dependencies)!=null?a:[]),params:new Set((c=e==null?void 0:e.params)!=null?c:[]),parent:!!(e!=null&&e.parent),route:!!(e!=null&&e.route),url:!!(e!=null&&e.url)}}function Le(){const e=document.querySelector("[autofocus]");if(e)e.focus();else{const a=document.body,c=a.getAttribute("tabindex");a.tabIndex=-1,a.focus({preventScroll:!0,focusVisible:!1}),c!==null?a.setAttribute("tabindex",c):a.removeAttribute("tabindex");const o=getSelection();if(o&&o.type!=="None"){const g=[];for(let d=0;d<o.rangeCount;d+=1)g.push(o.getRangeAt(d));setTimeout(()=>{if(o.rangeCount===g.length){for(let d=0;d<o.rangeCount;d+=1){const v=g[d],l=o.getRangeAt(d);if(v.commonAncestorContainer!==l.commonAncestorContainer||v.startContainer!==l.startContainer||v.endContainer!==l.endContainer||v.startOffset!==l.startOffset||v.endOffset!==l.endOffset)return}o.removeAllRanges()}})}}}function et(e,a,c,o){var h,w,p,T,j;let g,d;const v=new Promise((k,D)=>{g=k,d=D});return v.catch(()=>{}),{navigation:{from:{params:e.params,route:{id:(w=(h=e.route)==null?void 0:h.id)!=null?w:null},url:e.url},to:c&&{params:(p=a==null?void 0:a.params)!=null?p:null,route:{id:(j=(T=a==null?void 0:a.route)==null?void 0:T.id)!=null?j:null},url:c},willUnload:!a,type:o,complete:v},fulfil:g,reject:d}}function Wt(e,a,c){return O(this,null,function*(){const o=Ht(e,a);pt({client:o}),c?yield o._hydrate(c):o.goto(location.href,{replaceState:!0}),o._start_router()})}export{Wt as start};
